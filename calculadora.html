<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Vuelos - Boda Cynthia y Jose Miguel</title>

  <!-- Tu CSS global (manténlo si ya lo usas) -->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Lato:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- ====== CSS mínimo para botón y panel (auto-contenido) ====== -->
  <style>
    /* Paleta rápida (opcional, se integra con tu tema) */
    :root{
      --arena: #E7DCCB;
      --duna:  #CDBDA7;
      --mar:   #cbb893; /* si ya definiste en style.css, ignora */
      --tinta: #3F3A36;
    }

    /* Botón MENU/CERRAR proporcionado y centrado */
    .sm-toggle{
      position:relative; display:inline-flex; align-items:center; justify-content:center;
      height:2.6em; min-width:8ch; padding:0 .9em;
      background:rgba(0,0,0,.25); color:#F2EEE9; border:none; cursor:pointer;
      border-radius:999px; backdrop-filter:blur(6px);
      font:700 .95rem/1 'Lato',sans-serif; letter-spacing:.5px; text-transform:uppercase;
      overflow:hidden; transition:background .25s ease,color .25s ease,transform .08s ease;
      -webkit-tap-highlight-color:transparent;
      box-shadow: 0 6px 18px rgba(0,0,0,.18);
    }
    .sm-toggle:hover{ background:rgba(0,0,0,.35) }
    .sm-toggle:active{ transform:translateY(1px) scale(.99) }
    .staggered-menu-wrapper[data-open] .sm-toggle{ background:rgba(255,255,255,.85); color:var(--tinta) }

    /* Oculta restos antiguos si existieran */
    .sm-icon,.sm-icon-line,.menu-tip,.menu-guide{ display:none !important }

    /* Textos MENU/CERRAR con mismo canvas */
    .sm-toggle-text-open,.sm-toggle-text-close{
      position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
      width:100%; line-height:1; backface-visibility:hidden;
      transition:transform .35s ease, opacity .35s ease;
    }
    .sm-toggle-text-open{ opacity:1; transform:translateY(0%) }
    .sm-toggle-text-close{ opacity:0; transform:translateY(100%) }
    .staggered-menu-wrapper[data-open] .sm-toggle-text-open{ opacity:0; transform:translateY(-100%) }
    .staggered-menu-wrapper[data-open] .sm-toggle-text-close{ opacity:1; transform:translateY(0%) }

    /* Panel lateral básico */
    .staggered-menu-wrapper{ position:fixed; inset:0; height:100vh; width:100%; z-index:999; pointer-events:none }
    .staggered-menu-header{ position:absolute; top:0; left:0; width:100%; display:flex; align-items:center; justify-content:space-between; padding:1.5em; z-index:20 }
    .staggered-menu-header>*{ pointer-events:auto }
    .sm-logo{ display:inline-flex; align-items:center; gap:.5rem; text-decoration:none }
    .sm-logo-img{ height:56px; width:auto; display:block; transition:filter .3s ease }
    .menu-open .sm-logo-img{ filter:none }

    .staggered-menu-panel,.sm-prelayers{ position:absolute; top:0; right:0; width:clamp(300px,38vw,420px); height:100% }
    .staggered-menu-panel{
      background:#F2EEE9; display:flex; flex-direction:column; padding:7em 2em 2em;
      overflow-y:auto; z-index:10; pointer-events:auto; transform:translateX(100%); transition:transform .55s ease;
    }
    .staggered-menu-wrapper[data-open] .staggered-menu-panel{ transform:translateX(0) }
    .sm-prelayers{ pointer-events:none; z-index:5 }
    .sm-prelayer{ position:absolute; inset:0; transform:translateX(100%); transition:transform .5s ease }
    .staggered-menu-wrapper[data-open] .sm-prelayer{ transform:translateX(0) }

    .sm-panel-list{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:.6rem; counter-reset:smItem }
    .sm-panel-item{
      position:relative; color:var(--tinta); font-weight:700; text-decoration:none;
      font-size:clamp(2rem,5vw,3rem); text-transform:uppercase; letter-spacing:-2px;
      padding-right:1.6em; display:inline-block; transition:color .25s ease;
    }
    .sm-panel-item:hover{ color:var(--mar) }
    .sm-panel-item::after{
      counter-increment:smItem; content:counter(smItem,decimal-leading-zero);
      position:absolute; top:.1em; right:0; font-size:16px; color:var(--mar); opacity:.9;
    }

    @media (max-width:640px){
      .staggered-menu-header{ padding:1.1em }
      .staggered-menu-panel,.sm-prelayers{ width:100%; left:0; right:0 }
      .staggered-menu-panel{ padding-left:1.4em; padding-right:1.4em }
      .sm-logo-img{ height:50px }
    }

    /* Estilos de contenido de esta página */
    body{ background: #FAF7F2; color: var(--tinta); }
    .contenido-pagina{ max-width:1100px; margin:120px auto 64px; padding:0 18px }
    .hero-card{
      background: #ffffffCC; border-radius:20px; padding:28px;
      box-shadow: 0 10px 30px rgba(0,0,0,.08), inset 0 0 0 1px rgba(0,0,0,.04);
      backdrop-filter: blur(4px);
    }
    .badge{
      display:inline-flex; align-items:center; gap:.5rem;
      background: var(--arena); color:#5d5249; border-radius:999px; padding:.35rem .8rem; font-weight:700;
      text-transform:uppercase; letter-spacing:.5px; font-size:.82rem;
    }
    .grid{ display:grid; gap:20px; grid-template-columns: repeat(12, 1fr); }
    .col-12{ grid-column: span 12; }
    .col-6{ grid-column: span 6; }
    .card{
      background:#fff; border-radius:16px; padding:20px;
      box-shadow: 0 6px 22px rgba(0,0,0,.07), inset 0 0 0 1px rgba(0,0,0,.04);
    }
    h1{ font-family:'Dancing Script',cursive; font-size:3rem; margin:.2em 0 .1em; text-align:center }
    h2{ font-size:1.25rem; margin:0 0 .6rem; letter-spacing:.2px }
    p, li{ font-family:'Lato',sans-serif; line-height:1.6 }
    a.link{ color:#2F4667; text-decoration:none; font-weight:700 }
    .cta-row{ display:flex; gap:12px; flex-wrap:wrap; margin-top:14px }
    .btn{
      display:inline-flex; align-items:center; gap:.5rem; border-radius:999px; padding:.75rem 1rem;
      font-weight:700; text-decoration:none; background: var(--mar); color:#fff;
      box-shadow: 0 6px 16px rgba(0,0,0,.12);
    }
    .btn.secondary{ background:#2F4667; }
    .note{ font-size:.92rem; color:#5d5249 }
    ul.clean{ padding-left:1.1rem; margin: .2rem 0 .6rem; }
    .divider{ height:1px; background: rgba(0,0,0,.08); margin:18px 0; }
    .icon{ width:20px; text-align:center }
    @media (max-width:900px){
      .col-6{ grid-column: span 12; }
    }
  </style>
</head>
<body>

  <!-- ===== Wrapper del menú ===== -->
  <div class="staggered-menu-wrapper">
    <div class="sm-prelayers" aria-hidden="true">
      <div class="sm-prelayer" style="background:#2F4667;"></div>
      <div class="sm-prelayer" style="background:#A3ADA0;"></div>
      <div class="sm-prelayer" style="background:#E6DECF;"></div>
    </div>

    <header class="staggered-menu-header">
      <a href="index.html" class="sm-logo" aria-label="Homepage">
        <img src="logo.svg" alt="Cynthia & Jose Miguel" class="sm-logo-img" loading="eager" decoding="async">
      </a>

      <!-- Botón del menú -->
      <button class="sm-toggle" aria-label="Menú" aria-expanded="false" aria-controls="staggered-menu-panel" type="button">
        <span class="sm-toggle-text-open">MENU</span>
        <span class="sm-toggle-text-close">CERRAR</span>
      </button>
    </header>

    <!-- Panel de navegación -->
    <aside id="staggered-menu-panel" class="staggered-menu-panel" aria-hidden="true" role="navigation">
      <ul class="sm-panel-list" role="list">
        <li><a class="sm-panel-item" href="index.html">Página Principal</a></li>
        <li><a class="sm-panel-item" href="gracias.html">Agradecimientos</a></li>
        <li><a class="sm-panel-item" href="fecha-hora.html">Fecha y Hora</a></li>
        <li><a class="sm-panel-item" href="lugar.html">El Lugar</a></li>
        <li><a class="sm-panel-item" href="hospedaje.html">Hospedaje</a></li>
        <li><a class="sm-panel-item" href="xcaret.html">Hospedarte en Xcaret</a></li>
        <li><a class="sm-panel-item" href="vuelos.html">Vuelos</a></li>
        <li><a class="sm-panel-item" href="calculadora.html">Calculadora de tarifas</a></li>
        <li><a class="sm-panel-item" href="regalos.html">Regalos</a></li>
        <li><a class="sm-panel-item" href="Time.html">Cuenta Regresiva</a></li>
      </ul>
    </aside>
  </div>

  <!-- ====== CONTENIDO DE LA PÁGINA ====== -->
  <div class="contenido-pagina calculadora-wrapper">
    <h1>Calculadora Estimada de Tarifas</h1>
    <p class="introduccion-calculadora">
      Estimación basada en las <strong>tarifas grupales de nuestro contrato</strong> en Hotel Xcaret (All-Fun Inclusive®, impuestos incluidos).
      Selecciona categoría, fechas y ocupación por habitación. <em>Ocupación máxima: 4 personas por habitación.</em>
    </p>

    <div class="calculadora-form">
      <div class="form-row">
        <div class="form-group">
          <label for="categoria"><i class="fa-solid fa-hotel"></i> Categoría Habitación:</label>
          <select id="categoria" name="categoria">
            <option value="garden" selected>Suite Garden View</option>
            <option value="ocean">Suite Ocean View</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="checkin"><i class="fa-solid fa-calendar-day"></i> Fecha Check-in:</label>
          <input type="date" id="checkin" name="checkin" min="2026-02-01" max="2026-02-28" value="2026-02-05">
        </div>
        <div class="form-group">
          <label for="checkout"><i class="fa-solid fa-calendar-day"></i> Fecha Check-out:</label>
          <input type="date" id="checkout" name="checkout" min="2026-02-01" max="2026-02-28" value="2026-02-08">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="adultos"><i class="fa-solid fa-user"></i> Adultos (12+):</label>
          <input type="number" id="adultos" name="adultos" min="1" max="3" value="2" step="1">
        </div>
        <div class="form-group">
          <label for="ninos05"><i class="fa-solid fa-baby"></i> Niños 0–5 años (gratis):</label>
          <input type="number" id="ninos05" name="ninos05" min="0" max="3" value="0" step="1">
        </div>
        <div class="form-group">
          <label for="ninos617"><i class="fa-solid fa-child"></i> Niños 6–17 años:</label>
          <input type="number" id="ninos617" name="ninos617" min="0" max="3" value="0" step="1">
        </div>
      </div>
    </div>

    <div class="calculadora-resultados">
      <h2><i class="fa-solid fa-receipt"></i> Estimación de Costo</h2>

      <div class="resultado-item">
        <span class="resultado-label">Número de Noches:</span>
        <span class="resultado-valor" id="numNoches">--</span>
      </div>

      <div class="resultado-item">
        <span class="resultado-label">Tarifa por Noche (habitación):</span>
        <span class="resultado-valor" id="tarifaNoche">--</span>
      </div>

      <div class="resultado-item">
        <span class="resultado-label">Composición:</span>
        <span class="resultado-valor" id="detalleOcupacion">--</span>
      </div>

      <div class="resultado-item total">
        <span class="resultado-label">Tarifa Total Estimada:</span>
        <span class="resultado-valor" id="tarifaTotal">--</span>
      </div>

      <p class="nota-calculadora">
        *Tarifas estimadas por habitación, por noche, en pesos mexicanos (MXN), sujetas a disponibilidad y cambios. Incluyen impuestos y plan All-Fun Inclusive®. Los valores se redondean al entero superior. Esta es una herramienta de estimación; por favor, contáctanos directamente para que te compartamos el link de nuestro micrositio para reservar.
      </p>
      <p id="alerta" style="color:#b00020;font-weight:600;"></p>
    </div>

    <div class="navegacion-volver">
      <a href="index.html" class="boton-volver">&larr; Volver a la Página Principal</a>
    </div>
  </div>

  <!-- ====== LÓGICA CALCULADORA ====== -->
  <script>
    const tarifas = {
      garden: { nombre: "Suite Garden View", sencilla: 10020.00, doble: 8078.70, adicional: 6060.00, menor: 6060.00 },
      ocean:  { nombre: "Suite Ocean View",  sencilla: 12200.00, doble: 9842.70, adicional: 7380.00, menor: 7380.00 }
    };
    const formatterMXN = new Intl.NumberFormat('es-MX',{ style:'currency', currency:'MXN', minimumFractionDigits:0, maximumFractionDigits:0 });

    function pintar(noches, tarifaNoche, tarifaTotal, detalle){
      document.getElementById('numNoches').textContent = noches;
      document.getElementById('tarifaNoche').textContent = tarifaNoche;
      document.getElementById('tarifaTotal').textContent = tarifaTotal;
      document.getElementById('detalleOcupacion').textContent = detalle;
    }

    function calcularTarifa(){
      const categoria = document.getElementById('categoria').value;
      const checkinStr = document.getElementById('checkin').value;
      const checkoutStr = document.getElementById('checkout').value;
      const adultos = parseInt(document.getElementById('adultos').value) || 0;
      const ninos05 = parseInt(document.getElementById('ninos05').value) || 0;
      const ninos617 = parseInt(document.getElementById('ninos617').value) || 0;
      const alerta = document.getElementById('alerta'); alerta.textContent = "";

      if (!checkinStr || !checkoutStr || adultos <= 0){ pintar("--","--","--",""); return; }

      const inD = new Date(checkinStr), outD = new Date(checkoutStr);
      const inU = Date.UTC(inD.getUTCFullYear(), inD.getUTCMonth(), inD.getUTCDate());
      const outU= Date.UTC(outD.getUTCFullYear(),outD.getUTCMonth(),outD.getUTCDate());
      if (outU <= inU){ alerta.textContent = "La fecha de Check-out debe ser posterior a la fecha de Check-in."; pintar("--","--","--",""); return; }

      const noches = Math.ceil(Math.abs(outU - inU) / (1000*60*60*24));
      const totalPersonas = adultos + ninos05 + ninos617;
      if (totalPersonas > 4){ alerta.textContent = "Ocupación máxima por habitación: 4 personas."; pintar(noches,"--","--",`Adultos: ${adultos}, 0–5: ${ninos05}, 6–17: ${ninos617}`); return; }
      if (adultos > 3){ alerta.textContent = "Máximo 3 adultos por habitación (sugerido por políticas de ocupación)."; }

      const t = tarifas[categoria]; let tarifaNochePrecisa = 0;
      if (adultos === 1) tarifaNochePrecisa = t.sencilla + (ninos617 * t.menor);
      else if (adultos === 2) tarifaNochePrecisa = (t.doble * 2) + (ninos617 * t.menor);
      else if (adultos >= 3) tarifaNochePrecisa = (t.doble * 2) + ((adultos - 2) * t.adicional) + (ninos617 * t.menor);

      const tarifaTotalPrecisa = tarifaNochePrecisa * noches;
      const tarifaNocheRedondeada = Math.ceil(tarifaNochePrecisa);
      const tarifaTotalRedondeada = Math.ceil(tarifaTotalPrecisa);
      const detalle = `Adultos: ${adultos}, 0–5: ${ninos05}, 6–17: ${ninos617} — ${t.nombre}`;
      pintar(noches, formatterMXN.format(tarifaNocheRedondeada), formatterMXN.format(tarifaTotalRedondeada), detalle);
    }

    // Listeners
    document.addEventListener('DOMContentLoaded', ()=>{
      ['categoria','checkin','checkout','adultos','ninos05','ninos617'].forEach(id=>{
        document.getElementById(id).addEventListener(id==='categoria' || id.includes('date') ? 'change' : 'input', calcularTarifa);
      });
      calcularTarifa();
    });
  </script>

  <!-- ===== JS mínimo para que el botón funcione (auto-contenido) ===== -->
  <script>
    (function(){
      const w = document.querySelector('.staggered-menu-wrapper');
      const p = document.getElementById('staggered-menu-panel');
      const b = document.querySelector('.sm-toggle');
      if(!w || !p || !b) return;

      // Asegura spans internos por si se pierden
      if(!b.querySelector('.sm-toggle-text-open') || !b.querySelector('.sm-toggle-text-close')){
        const open = document.createElement('span'); open.className='sm-toggle-text-open'; open.textContent='MENU';
        const close= document.createElement('span'); close.className='sm-toggle-text-close'; close.textContent='CERRAR';
        b.textContent=''; b.append(open, close);
      }

      const isOpen = ()=> b.getAttribute('aria-expanded')==='true';
      const apply = (o)=>{
        if(o) w.setAttribute('data-open',''); else w.removeAttribute('data-open');
        p.setAttribute('aria-hidden', String(!o));
        b.setAttribute('aria-expanded', String(o));
        document.body.classList.toggle('menu-open', o);
      };

      // Toggle con click
      b.addEventListener('click', ()=> apply(!isOpen()));

      // Cerrar con clic fuera
      document.addEventListener('click', e=>{
        if(!isOpen()) return;
        if(!p.contains(e.target) && !b.contains(e.target)) apply(false);
      });

      // Cerrar con ESC
      window.addEventListener('keydown', e=>{
        if(e.key === 'Escape' && isOpen()) apply(false);
      });

      // Estado cerrado al cargar
      requestAnimationFrame(()=>apply(false));
    })();
  </script>
</body>
</html>
